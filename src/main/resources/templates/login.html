<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
	<link th:href="@{/css/style.css}" rel="stylesheet">
	<title>ログイン</title>
</head>

<body class="bg-light">

	<div class="container d-flex justify-content-center align-items-center" style="height: 100vh;">
		<div class="card shadow-sm p-4" style="max-width: 400px; width: 100%;">

			<h3 class="text-center mb-4">ログイン</h3>

			<!-- ログアウトメッセージ -->
			<div th:if="${loginMessage != null}" class="alert alert-success">
				<span th:text="${loginMessage}"></span>
			</div>
			
			<!-- ▼ サクセスメッセージ ▼ -->
			<div th:if="${successMessage}" class="alert alert-success"
			     th:text="${successMessage}"></div>

			<form th:action="@{/login}" th:object="${loginForm}" method="post">

				<!-- 上部エラー表示 -->
				<div th:if="${#fields.hasErrors('*')} or ${loginError != null}" class="alert alert-danger">
					<ul class="m-0 p-0 list-unstyled">
						<!-- フィールドごとの必須入力エラー -->
						<li th:each="err : ${#fields.errors('loginId')}" th:text="${err}" th:if="${loginError == null}">
						</li>
						<li th:each="err : ${#fields.errors('loginPass')}" th:text="${err}"
							th:if="${loginError == null}">
						</li>
						<!-- 認証エラー -->
						<li th:if="${loginError != null}" th:text="${loginError}"></li>
					</ul>
				</div>

				<!-- Login Form -->
				<div class="mb-3">
					<input type="text" th:field="*{loginId}" class="form-control" placeholder="Emailアドレスを入力">
				</div>

				<div class="mb-3">
					<input type="password" th:field="*{loginPass}" class="form-control" placeholder="パスワードを入力">
				</div>

				<div class="d-flex justify-content-between align-items-center mb-3">
					<small><a th:href="@{/register}">会員登録はこちら</a></small>
				</div>
				<div class="mb-3">
					<input type="submit" class="btn btn-primary w-100" value="ログイン">
				</div>
			</form>
		</div>
	</div>

	<!-- Bootstrap JS -->
	<script th:src="@{js/jquery-3.6.1.min.js}"></script>
	<script th:src="@{js/bootstrap.bundle.min.js}"></script>
</body>

</html>